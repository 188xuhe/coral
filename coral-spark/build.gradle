apply plugin:'li-java'
apply plugin: 'maven-publish'

dependencies {
  // see :coral-hive build.gradle for why we add depedency this way
  compile files("${project(':coral-calcite').buildDir.absolutePath}/libs/coral-calcite-${version}.jar") {
    builtBy project(':coral-calcite').tasks.getByName('shadowJar')
  }

  testCompile project(path: ':coral-hive')

  testCompile (spec.product.hive.'hive-exec') {
    exclude group: 'org.apache.avro', module: 'avro-tools'
    // These exclusions are required to prevent duplicate classes since we include
    // shaded jar above
    exclude group: 'org.apache.calcite', module: 'calcite-core'
    exclude group: 'org.apache.calcite', module: 'calcite-avatica'
  }
}