def modules = ['coral-hive', 'coral-pig', 'coral-presto', 'coral-tests','coral-spark','coral-schema']
def crossbuildmodules = ['coral-tools']

modules.each { module ->
  if (!file(module).directory) {
    throw new GradleException("Module '$module' specified in the settings.gradle file must be a valid directory in the root project.")
  }
  file(module).eachDir { submodule ->
    if (!submodule.name.startsWith('.')) {
      include "${module}:${submodule.name}"
    }
  }
}

apply plugin: com.linkedin.ligradle.scala.LiScalaCrossBuildPlugin

buildscript {
  gradle.ext.addArtifactory(repositories)
  gradle.ext.buildConfig()['linkedin.gradle.dependencies'].split(',').each { dep ->
    dependencies { classpath dep }
    configurations.classpath.resolutionStrategy.force(dep)
  }
}

scalaCrossBuild {
  defaultScalaVersion '2.11.8'
  targetScalaVersions '2.11.8'
  projectsToCrossBuild crossbuildmodules
}
